diff --git a/src/main/java/humaneval/buggy/FIX_SPACES.java b/src/main/java/humaneval/buggy/FIX_SPACES.java
index 2f27898..4b67704 100644
--- a/src/main/java/humaneval/buggy/FIX_SPACES.java
+++ b/src/main/java/humaneval/buggy/FIX_SPACES.java
@@ -10,29 +10,46 @@ fix_spaces(" Example 2") == "_Example_2"
 fix_spaces(" Example   3") == "_Example-3" */
 
 public class FIX_SPACES {
-    public static String fix_spaces(String text) {
-        String new_text = "";
-        int i = 0;
-        int start = 0;
-        int end = 0;
-        while (i < text.length()) {
-            if (text.charAt(i) == ' ') end += 1;
-            else {
-                if (end - start > 2) new_text += "-" + text.substring(i, i + 1);
-                else if (end - start > 0) {
-                    for (int j = start; j < end; j += 1) {
-                        new_text += "_";
-                    }
-                    new_text += text.substring(i, i + 1);
-                } else {
-                    new_text += text.substring(i, i + 1);
+public static String fix_spaces(String text) {
+    String new_text = "";
+    int i = 0;
+    int start = 0;
+    int end = 0;
+    while (i < text.length()) {
+        if (text.charAt(i) == ' ') end += 1;
+        else {
+            if (end - start > 2) {
+                new_text += "-" + text.substring(i, i + 1);
+            }
+            else if (end - start > 0) {
+                for (int j = start; j < end; j += 1) {
+                    new_text += "_";
                 }
-                start = i + 1;
-                end = i + 1;
+                new_text += text.substring(i, i + 1);
+            }
+            else {
+                new_text += text.substring(i, i + 1);
             }
-            i += 1;
+            start = i + 1;
+            end = i + 1;
         }
-
-        return new_text;
+        i += 1;
+    }
+    
+    // handle the last word
+    if (end - start > 2) {
+        new_text += "-" + text.substring(i);
     }
+    else if (end - start > 0) {
+        for (int j = start; j < end; j += 1) {
+            new_text += "_";
+        }
+        new_text += text.substring(i);
+    }
+    else {
+        new_text += text.substring(i);
+    }
+
+    return new_text;
+}
 }