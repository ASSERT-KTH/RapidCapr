diff --git a/src/main/java/humaneval/buggy/FIX_SPACES.java b/src/main/java/humaneval/buggy/FIX_SPACES.java
index 2f27898..0f1fc13 100644
--- a/src/main/java/humaneval/buggy/FIX_SPACES.java
+++ b/src/main/java/humaneval/buggy/FIX_SPACES.java
@@ -10,29 +10,42 @@ fix_spaces(" Example 2") == "_Example_2"
 fix_spaces(" Example   3") == "_Example-3" */
 
 public class FIX_SPACES {
-    public static String fix_spaces(String text) {
-        String new_text = "";
-        int i = 0;
-        int start = 0;
-        int end = 0;
-        while (i < text.length()) {
-            if (text.charAt(i) == ' ') end += 1;
-            else {
-                if (end - start > 2) new_text += "-" + text.substring(i, i + 1);
-                else if (end - start > 0) {
-                    for (int j = start; j < end; j += 1) {
+public static String fix_spaces(String text) {
+    String new_text = "";
+    int i = 0;
+    int start = 0;
+    int end = 0;
+    while (i < text.length()) {
+        if (text.charAt(i) == ' ') {
+            end++;
+        } else {
+            if (end > start) {
+                int num_spaces = end - start;
+                if (num_spaces > 2) {
+                    new_text += "-";
+                } else {
+                    for (int j = start; j < end; j++) {
                         new_text += "_";
                     }
-                    new_text += text.substring(i, i + 1);
-                } else {
-                    new_text += text.substring(i, i + 1);
                 }
-                start = i + 1;
-                end = i + 1;
             }
-            i += 1;
+            new_text += text.charAt(i);
+            start = end = i + 1;
         }
+        i++;
+    }
 
-        return new_text;
+    if (end > start) {
+        int num_spaces = end - start;
+        if (num_spaces > 2) {
+            new_text += "-";
+        } else {
+            for (int j = start; j < end; j++) {
+                new_text += "_";
+            }
+        }
     }
+
+    return new_text;
+}
 }