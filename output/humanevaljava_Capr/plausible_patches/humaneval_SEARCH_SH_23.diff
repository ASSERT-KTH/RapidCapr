diff --git a/src/main/java/humaneval/buggy/SEARCH.java b/src/main/java/humaneval/buggy/SEARCH.java
index 285deda..74dda71 100644
--- a/src/main/java/humaneval/buggy/SEARCH.java
+++ b/src/main/java/humaneval/buggy/SEARCH.java
@@ -18,9 +18,24 @@ public class SEARCH {
         }
 
         int result = -1;
-        int[] frq = new int[max];
-        for (int i = 0; i < lst.length; i += 1)  frq[i] += 1;
-        for (int i = 0; i < frq.length; i += 1) if (frq[i] >= i) result = i;
+int[] frq = new int[max+1];
+int lstLen = lst.length;
+for (int i = 0; i < lstLen; i++) {
+    int val = lst[i];
+    if (val >= 0 && val <= max) {
+        frq[val]++;
+        if (frq[val] >= val && val > result) {
+            result = val;
+            if (result == max) {
+                break;
+            }
+        }
+    }
+}
+
+if (result == -1 && frq[0] > 0) {
+    result = 0;
+}
         
         return result;
     }