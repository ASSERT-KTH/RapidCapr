diff --git a/src/main/java/humaneval/buggy/SEARCH.java b/src/main/java/humaneval/buggy/SEARCH.java
index 285deda..a31bd40 100644
--- a/src/main/java/humaneval/buggy/SEARCH.java
+++ b/src/main/java/humaneval/buggy/SEARCH.java
@@ -18,9 +18,27 @@ public class SEARCH {
         }
 
         int result = -1;
-        int[] frq = new int[max];
-        for (int i = 0; i < lst.length; i += 1)  frq[i] += 1;
-        for (int i = 0; i < frq.length; i += 1) if (frq[i] >= i) result = i;
+int[] frq = new int[max + 1];
+for (int i : lst) {
+    if (i >= 0) {
+        if (i <= max) {
+            frq[i]++;
+        }
+        // check for new largest element
+        if (i > result) {
+            // check if the new element is repeated enough times
+            int count = 0;
+            for (int j : lst) {
+                if (j == i) {
+                    count++;
+                }
+            }
+            if (count >= i) {
+                result = i;
+            }
+        }
+    }
+}
         
         return result;
     }