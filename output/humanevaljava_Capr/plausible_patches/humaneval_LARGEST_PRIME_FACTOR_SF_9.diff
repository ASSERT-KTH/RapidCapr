diff --git a/src/main/java/humaneval/buggy/LARGEST_PRIME_FACTOR.java b/src/main/java/humaneval/buggy/LARGEST_PRIME_FACTOR.java
index 794cf2e..fd4fd8f 100644
--- a/src/main/java/humaneval/buggy/LARGEST_PRIME_FACTOR.java
+++ b/src/main/java/humaneval/buggy/LARGEST_PRIME_FACTOR.java
@@ -17,13 +17,31 @@ public class LARGEST_PRIME_FACTOR {
         return true;
     }
 
-    public static int largest_prime_factor(int n) {
-        int largest = 1;
-        for (int j = 2; j < n; j += 1) {
-            if (is_prime(j)){
-                largest = n % j;
+public static int largest_prime_factor(int n) {
+    if (n <= 1) {
+        return -1; // or throw an exception for invalid input
+    }
+    int largest = 1;
+    for (int j = 2; j <= n; j++) {
+        if (n % j == 0) {
+            boolean isPrime = true;
+            for (int k = 2; k * k <= j; k++) {
+                if (j % k == 0) {
+                    isPrime = false;
+                    break;
+                }
+            }
+            if (isPrime) {
+                largest = j;
+            }
+            while (n % j == 0) {
+                n /= j;
             }
         }
-        return largest;
+        if (j > n) {
+            break;
+        }
     }
+    return largest;
+}
 }