{
    "patch": "            // The country and variant arguments are optional but must be of the right format\n            String country = \"\";\n            String variant = \"\";\n            if (len == 5) {\n                country = str.substring(3, 5);\n            } else if (len > 5) {\n                if (str.charAt(5) != '_') {\n                    throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n                }\n                variant = str.substring(6);\n                if (len > 7) {\n                    for (int i = 0; i < variant.length(); i++) {\n                        char ch = variant.charAt(i);\n                        if (ch == '_' || ch == ' ' || Character.isLetterOrDigit(ch)) {\n                            continue;\n                        } else {\n                            throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n                        }\n                    }\n                }\n                country = str.substring(3, 5);\n            }\n            return new Locale(language, country, variant);",
    "patch_diff": "diff --git a/src/java/org/apache/commons/lang/LocaleUtils.java b/src/java/org/apache/commons/lang/LocaleUtils.java\nindex 139d9a7f..a0d820a6 100644\n--- a/src/java/org/apache/commons/lang/LocaleUtils.java\n+++ b/src/java/org/apache/commons/lang/LocaleUtils.java\n@@ -111,6 +111,29 @@ public class LocaleUtils {\n                 throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n             }\n             char ch3 = str.charAt(3);\n+            // The country and variant arguments are optional but must be of the right format\n+            String country = \"\";\n+            String variant = \"\";\n+            if (len == 5) {\n+                country = str.substring(3, 5);\n+            } else if (len > 5) {\n+                if (str.charAt(5) != '_') {\n+                    throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n+                }\n+                variant = str.substring(6);\n+                if (len > 7) {\n+                    for (int i = 0; i < variant.length(); i++) {\n+                        char ch = variant.charAt(i);\n+                        if (ch == '_' || ch == ' ' || Character.isLetterOrDigit(ch)) {\n+                            continue;\n+                        } else {\n+                            throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n+                        }\n+                    }\n+                }\n+                country = str.substring(3, 5);\n+            }\n+            return new Locale(language, country, variant);\n             char ch4 = str.charAt(4);\n             if (ch3 < 'A' || ch3 > 'Z' || ch4 < 'A' || ch4 > 'Z') {\n                 throw new IllegalArgumentException(\"Invalid locale format: \" + str);",
    "result_reason": "error: cannot find symbol",
    "test_result": "ERROR"
}