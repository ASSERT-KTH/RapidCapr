{
    "call": {
        "messages": [
            {
                "content": "You are an automated program repair tool.",
                "role": "system"
            },
            {
                "content": "The following code contains a bug\n```java\n    public StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n        if (width > 0) {\n            ensureCapacity(size + width);\n            String str = (obj == null ? getNullText() : obj.toString());\n            int strLen = str.length();\n            if (strLen >= width) {\n                str.getChars(0, strLen, buffer, size);\n            } else {\n                int padLen = width - strLen;\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n            size += width;\n        }\n        return this;\n    }\n```\nThe code fails on this test:\n```\ntestLang299\n```\non this test line:\n```java\n        sb.appendFixedWidthPadRight(\"foo\", 1, '-');\n```\nwith the following test error:\n```\njava.lang.ArrayIndexOutOfBoundsException\n```\nPlease provide the correct function.\nIt can be fixed by the following functions:\n1. ```java\n    public StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n        if (width > 0) {\n            ensureCapacity(size + width);\n            String str = (obj == null ? getNullText() : obj.toString());\n            int strLen = str.length();\n            if (strLen >= width) {\n                str.getChars(0, width, buffer, size);\n            } else {\n                int padLen = width - strLen;\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n            size += width;\n        }\n        return this;\n    }\n```\n2. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            int padLen = width - strLen;\n            if (padChar == 0) {\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = ' ';\n                }\n            } else {\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n        }\n        size += width;\n    }\n    return this;\n}\n```\n3. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            int padLen = width - strLen;\n            str.getChars(0, strLen, buffer, size);\n            for (int i = 0; i < padLen; i++) {\n                buffer[size + strLen + i] = padChar;\n            }\n        }\n        size += width;\n    }\n    return this;\n}\n```\n4. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        int padLen = width - strLen;\n        if (padLen > 0) {\n            for (int i = 0; i < padLen; i++) {\n                buffer[size + strLen + i] = padChar;\n            }\n        }\n        str.getChars(0, Math.min(strLen, width), buffer, size);\n        size += width;\n    }\n    return this;\n}\n```\n5. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        int padLen = width - strLen;\n        if (padLen > 0) {\n            for (int i = size + strLen; i < size + width; i++) {\n                buffer[i] = padChar;\n            }\n        }\n        str.getChars(0, Math.min(strLen, width), buffer, size);\n        size += width;\n    }\n    return this;\n}\n```\nPlease generate an alternative fix function.",
                "role": "user"
            }
        ],
        "model": "gpt-3.5-turbo-0301",
        "n": 1,
        "temperature": 1,
        "top_p": 1
    },
    "response": {
        "choices": [
            {
                "finish_reason": "stop",
                "index": 0,
                "message": {
                    "content": "Here is an alternative fix for the code:\n```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            int padLen = width - strLen;\n            for (int i = 0; i < padLen; i++) {\n                buffer[size + i] = padChar; // pad with the given character\n            }\n            str.getChars(0, strLen, buffer, size + padLen);\n        }\n        size += width;\n    }\n    return this;\n}\n```\nIn this solution, we first check if the given width is greater than 0. We ensure that the capacity is enough for the current size of the string plus the width. We then convert the input object to a string and get its length. If the length is greater than or equal to the given width, we extract the first `width` characters from the string and add it to the string builder. If the length is less than the given width, we pad the remaining spaces with the given character and then add the string to the string builder. Finally, we update the size of the string builder and return it.",
                    "role": "assistant"
                }
            }
        ],
        "created": 1686746734,
        "id": "chatcmpl-7RKAQuJoGbZyHDuAJTBg2vIqHJxc0",
        "model": "gpt-3.5-turbo-0301",
        "object": "chat.completion",
        "usage": {
            "completion_tokens": 301,
            "prompt_tokens": 1108,
            "total_tokens": 1409
        }
    }
}