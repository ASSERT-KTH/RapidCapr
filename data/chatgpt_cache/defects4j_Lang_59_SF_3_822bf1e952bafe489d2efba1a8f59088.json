{
    "call": {
        "messages": [
            {
                "content": "You are an automated program repair tool.",
                "role": "system"
            },
            {
                "content": "The following code contains a bug\n```java\n    public StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n        if (width > 0) {\n            ensureCapacity(size + width);\n            String str = (obj == null ? getNullText() : obj.toString());\n            int strLen = str.length();\n            if (strLen >= width) {\n                str.getChars(0, strLen, buffer, size);\n            } else {\n                int padLen = width - strLen;\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n            size += width;\n        }\n        return this;\n    }\n```\nThe code fails on this test:\n```\ntestLang299\n```\non this test line:\n```java\n        sb.appendFixedWidthPadRight(\"foo\", 1, '-');\n```\nwith the following test error:\n```\njava.lang.ArrayIndexOutOfBoundsException\n```\nPlease provide the correct function.\nIt can be fixed by the following function:\n1. ```java\n    public StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n        if (width > 0) {\n            ensureCapacity(size + width);\n            String str = (obj == null ? getNullText() : obj.toString());\n            int strLen = str.length();\n            if (strLen >= width) {\n                str.getChars(0, width, buffer, size);\n            } else {\n                int padLen = width - strLen;\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n            size += width;\n        }\n        return this;\n    }\n```\nPlease generate an alternative fix function.",
                "role": "user"
            }
        ],
        "model": "gpt-3.5-turbo-0301",
        "n": 1,
        "temperature": 1,
        "top_p": 1
    },
    "response": {
        "choices": [
            {
                "finish_reason": "stop",
                "index": 0,
                "message": {
                    "content": "Here's an alternative fix that uses String.format() instead of manually looping through characters:\n\n```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            String paddedStr = String.format(\"%-\" + width + \"s\", str).replace(' ', padChar);\n            paddedStr.getChars(0, width, buffer, size);\n        }\n        size += width;\n    }\n    return this;\n}\n```\n\nThis code uses String.format() to left-pad the string with spaces up to the given width, and then replaces the spaces with the given padChar. It then copies the resulting padded string into the buffer. This avoids the need to manually loop through characters and keeps the code concise and readable.",
                    "role": "assistant"
                }
            }
        ],
        "created": 1686746313,
        "id": "chatcmpl-7RK3dLKSyUOyngALDEnRyLlMrG3P5",
        "model": "gpt-3.5-turbo-0301",
        "object": "chat.completion",
        "usage": {
            "completion_tokens": 217,
            "prompt_tokens": 435,
            "total_tokens": 652
        }
    }
}