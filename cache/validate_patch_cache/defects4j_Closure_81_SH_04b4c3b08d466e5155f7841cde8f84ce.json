{
    "patch": "if (name == null) {\n  name = new Name();\n}\nNode nameNode = transform(name);\nboolean isUnnamedFunction = nameNode.isEmpty();\nif (isUnnamedFunction) {\n  // Old Rhino tagged the empty name node with the line number of the\n  // declaration.\n  nameNode.setLineno(functionNode.getLineno());\n  // TODO(bowdidge) Mark line number of paren correctly.\n  // Same problem as below - the left paren might not be on the\n  // same line as the function keyword.\n  int lpColumn = functionNode.getAbsolutePosition() +\n      functionNode.getLp();\n  nameNode.setCharno(position2charno(lpColumn));\n  nameNode.setType(Token.EMPTY);\n}\n\nNode node = newNode(Token.FUNCTION);\nnode.addChildToBack(nameNode);",
    "patch_diff": "diff --git a/src/com/google/javascript/jscomp/parsing/IRFactory.java b/src/com/google/javascript/jscomp/parsing/IRFactory.java\nindex 4a733cda..a09bafca 100644\n--- a/src/com/google/javascript/jscomp/parsing/IRFactory.java\n+++ b/src/com/google/javascript/jscomp/parsing/IRFactory.java\n@@ -514,6 +514,26 @@ public class IRFactory {\n       Name name = functionNode.getFunctionName();\n       Boolean isUnnamedFunction = false;\n       if (name == null) {\n+if (name == null) {\n+  name = new Name();\n+}\n+Node nameNode = transform(name);\n+boolean isUnnamedFunction = nameNode.isEmpty();\n+if (isUnnamedFunction) {\n+  // Old Rhino tagged the empty name node with the line number of the\n+  // declaration.\n+  nameNode.setLineno(functionNode.getLineno());\n+  // TODO(bowdidge) Mark line number of paren correctly.\n+  // Same problem as below - the left paren might not be on the\n+  // same line as the function keyword.\n+  int lpColumn = functionNode.getAbsolutePosition() +\n+      functionNode.getLp();\n+  nameNode.setCharno(position2charno(lpColumn));\n+  nameNode.setType(Token.EMPTY);\n+}\n+\n+Node node = newNode(Token.FUNCTION);\n+node.addChildToBack(nameNode);\n         name = new Name();\n         name.setIdentifier(\"\");\n         isUnnamedFunction = true;",
    "result_reason": "error: variable isUnnamedFunction is already defined in method processFunctionNode(FunctionNode)",
    "test_result": "ERROR"
}