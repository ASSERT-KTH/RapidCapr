{
    "patch": "import java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Optional;\n\npublic static String string_to_md5(String text) {\n    return Optional.ofNullable(text)\n                   .filter(str -> !str.isEmpty())\n                   .map(str -> {\n                       try {\n                           MessageDigest md = MessageDigest.getInstance(\"MD5\");\n                           md.update(str.getBytes());\n                           byte[] digest = md.digest();\n                           StringBuilder sb = new StringBuilder();\n                           for (byte b : digest) {\n                               sb.append(String.format(\"%02x\", b));\n                           }\n                           return sb.toString();\n                       } catch (NoSuchAlgorithmException e) {\n                           return null;\n                       }\n                   })\n                   .orElse(null);\n}",
    "patch_diff": "diff --git a/src/main/java/humaneval/buggy/STRING_TO_MD5.java b/src/main/java/humaneval/buggy/STRING_TO_MD5.java\nindex f3c58b9..69fd399 100644\n--- a/src/main/java/humaneval/buggy/STRING_TO_MD5.java\n+++ b/src/main/java/humaneval/buggy/STRING_TO_MD5.java\n@@ -10,12 +10,27 @@ import javax.xml.bind.DatatypeConverter;\n // >>> string_to_md5('Hello world') == '3e25960a79dbc69b674cd4ec67a72c62'\n \n public class STRING_TO_MD5 {\n-    public static String string_to_md5(String text) throws NoSuchAlgorithmException {\n-        if (text.equals(\"\")) return null;\n+import java.security.MessageDigest;\n+import java.security.NoSuchAlgorithmException;\n+import java.util.Optional;\n \n-        MessageDigest md = MessageDigest.getInstance(\"SHA-384\");\n-        md.update(text.getBytes());\n-        byte[] digest = md.digest();\n-        return DatatypeConverter.printHexBinary(digest).toLowerCase();\n-    } \n+public static String string_to_md5(String text) {\n+    return Optional.ofNullable(text)\n+                   .filter(str -> !str.isEmpty())\n+                   .map(str -> {\n+                       try {\n+                           MessageDigest md = MessageDigest.getInstance(\"MD5\");\n+                           md.update(str.getBytes());\n+                           byte[] digest = md.digest();\n+                           StringBuilder sb = new StringBuilder();\n+                           for (byte b : digest) {\n+                               sb.append(String.format(\"%02x\", b));\n+                           }\n+                           return sb.toString();\n+                       } catch (NoSuchAlgorithmException e) {\n+                           return null;\n+                       }\n+                   })\n+                   .orElse(null);\n+}\n }",
    "result_reason": " /tmp/humaneval-STRING_TO_MD5/src/main/java/humaneval/buggy/STRING_TO_MD5.java:[13,1] illegal start of type",
    "test_result": "ERROR"
}