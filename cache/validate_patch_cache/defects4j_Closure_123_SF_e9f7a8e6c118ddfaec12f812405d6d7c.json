{
    "patch": "public String fixBug(String code) {\n    if (code.contains(\"for(\") && code.contains(\":\")) {\n        String[] parts = code.split(\":\");\n        String init = parts[0].substring(parts[0].indexOf(\"(\") + 1);\n        if (init.contains(\"?\")) {\n            String[] condParts = init.split(\";\");\n            String cond = \"\";\n            for (int i = 1; i < condParts.length; i++) {\n                cond += condParts[i];\n                if (i != condParts.length - 1) {\n                    cond += \";\";\n                }\n            }\n            String[] trueFalse = condParts[0].split(\"\\\\?\");\n            String truePart = trueFalse[1].substring(0, trueFalse[1].indexOf(\":\"));\n            String falsePart = trueFalse[1].substring(trueFalse[1].indexOf(\":\") + 1);\n            String newCond = \"(\" + truePart + \" ? \" + trueFalse[0] + \" : \" + falsePart + \")\";\n            cond = newCond + \";\" + cond;\n            String loop = parts[1];\n            loop = loop.substring(loop.indexOf(\")\") + 1);\n            return parts[0].replace(trueFalse[0], \"(\" + cond) + \":\" + loop;\n        }\n    }\n    return code;\n}",
    "patch_diff": "diff --git a/src/com/google/javascript/jscomp/CodeGenerator.java b/src/com/google/javascript/jscomp/CodeGenerator.java\nindex 54eb5cf8..2dbd7a79 100644\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n@@ -104,7 +104,31 @@ class CodeGenerator {\n     add(n, Context.OTHER);\n   }\n \n-  void add(Node n, Context context) {\n+public String fixBug(String code) {\n+    if (code.contains(\"for(\") && code.contains(\":\")) {\n+        String[] parts = code.split(\":\");\n+        String init = parts[0].substring(parts[0].indexOf(\"(\") + 1);\n+        if (init.contains(\"?\")) {\n+            String[] condParts = init.split(\";\");\n+            String cond = \"\";\n+            for (int i = 1; i < condParts.length; i++) {\n+                cond += condParts[i];\n+                if (i != condParts.length - 1) {\n+                    cond += \";\";\n+                }\n+            }\n+            String[] trueFalse = condParts[0].split(\"\\\\?\");\n+            String truePart = trueFalse[1].substring(0, trueFalse[1].indexOf(\":\"));\n+            String falsePart = trueFalse[1].substring(trueFalse[1].indexOf(\":\") + 1);\n+            String newCond = \"(\" + truePart + \" ? \" + trueFalse[0] + \" : \" + falsePart + \")\";\n+            cond = newCond + \";\" + cond;\n+            String loop = parts[1];\n+            loop = loop.substring(loop.indexOf(\")\") + 1);\n+            return parts[0].replace(trueFalse[0], \"(\" + cond) + \":\" + loop;\n+        }\n+    }\n+    return code;\n+}\n     if (!cc.continueProcessing()) {\n       return;\n     }",
    "result_reason": "error: illegal start of type",
    "test_result": "ERROR"
}