{
    "patch": "          switch (n.getType()) {\n            case Token.GETTER_DEF:\n            case Token.SETTER_DEF:\n            case Token.STRING_KEY:\n              // This may be a key in an object literal declaration.\n              name = null;\n              if (parent != null && parent.isObjectLit()) {\n                name = getNameForObjLitKey(n);\n              }\n              if (name == null) {\n                return;\n              }\n              isSet = true;\n              switch (n.getType()) {\n                case Token.STRING_KEY:\n                  type = getValueType(n.getFirstChild());\n                  break;\n                case Token.GETTER_DEF:\n                  type = Name.Type.GET;\n                  break;\n                case Token.SETTER_DEF:\n                  type = Name.Type.SET;\n                  break;\n                default:\n                  throw new IllegalStateException(\"unexpected:\" + n);\n              }\n              break;\n            case Token.NAME:\n              // This may be a variable get or set.\n              if (parent != null) {\n                switch (parent.getType()) {\n                  case Token.VAR:\n                    isSet = true;\n                    Node rvalue = n.getFirstChild();\n                    type = rvalue == null ? Name.Type.OTHER : getValueType(rvalue);\n                    break;\n                  case Token.ASSIGN:\n                    if (parent.getFirstChild() == n) {\n                      isSet = true;\n                      type = getValueType(n.getNext());\n                    }\n                    break;\n                  case Token.FUNCTION:\n                    Node gramps = parent.getParent();\n                    if (gramps == null || NodeUtil.isFunctionExpression(parent)) {\n                      return;\n                    }\n                    isSet = true;\n                    type = Name.Type.FUNCTION;\n                    break;\n                  case Token.INC:\n                  case Token.DEC:\n                    isSet = true;\n                    type = Name.Type.OTHER;\n                    break;\n                  default:\n                    if (NodeUtil.isAssignmentOp(parent) &&\n                        parent.getFirstChild() == n) {\n                      isSet = true;\n                      type = Name.Type.OTHER;\n                    }\n                    break;\n                }\n              }\n              name = n.getString();\n              break;\n            case Token.GETPROP:\n              if (NodeUtil.isLValue(n)) {\n                isSet = true;\n                type = Name.Type.OTHER;\n\n                Node last = n;\n                while (last.getLastChild() != null) {\n                  last = last.getLastChild();\n                }\n\n                if (last.getType() == Token.FUNCTION) {\n                  type = Name.Type.FUNCTION;\n                  isSet = false;\n                }\n              } else {\n                name = n.getQualifiedName();\n                if (name == null) {\n                  return;\n                }\n              }\n              if (isSet) {\n                handleSet(module, scope, n, name);\n              } else {\n                handleGet(module, scope, n, parent, name, type);\n              }\n              break;\n            default:\n              return;\n          }\n\n          // We are only interested in global names.\n          if (!isGlobalNameReference(name, scope)) {\n            return;\n          }\n\n          if (isSet) {\n            if (isGlobalScope(scope)) {\n              handleSetFromGlobal(module, scope, n, parent, name, isPropAssign, type);\n            } else {\n              handleSetFromLocal(module, scope, n, parent, name);\n            }\n          } else {\n            handleGet(module, scope, n, parent, name);\n          }\n        }",
    "patch_diff": "diff --git a/src/com/google/javascript/jscomp/GlobalNamespace.java b/src/com/google/javascript/jscomp/GlobalNamespace.java\nindex 639318df..7ad1a02d 100644\n--- a/src/com/google/javascript/jscomp/GlobalNamespace.java\n+++ b/src/com/google/javascript/jscomp/GlobalNamespace.java\n@@ -363,6 +363,117 @@ class GlobalNamespace\n                 isSet = true;\n                 type = Name.Type.FUNCTION;\n                 break;\n+          switch (n.getType()) {\n+            case Token.GETTER_DEF:\n+            case Token.SETTER_DEF:\n+            case Token.STRING_KEY:\n+              // This may be a key in an object literal declaration.\n+              name = null;\n+              if (parent != null && parent.isObjectLit()) {\n+                name = getNameForObjLitKey(n);\n+              }\n+              if (name == null) {\n+                return;\n+              }\n+              isSet = true;\n+              switch (n.getType()) {\n+                case Token.STRING_KEY:\n+                  type = getValueType(n.getFirstChild());\n+                  break;\n+                case Token.GETTER_DEF:\n+                  type = Name.Type.GET;\n+                  break;\n+                case Token.SETTER_DEF:\n+                  type = Name.Type.SET;\n+                  break;\n+                default:\n+                  throw new IllegalStateException(\"unexpected:\" + n);\n+              }\n+              break;\n+            case Token.NAME:\n+              // This may be a variable get or set.\n+              if (parent != null) {\n+                switch (parent.getType()) {\n+                  case Token.VAR:\n+                    isSet = true;\n+                    Node rvalue = n.getFirstChild();\n+                    type = rvalue == null ? Name.Type.OTHER : getValueType(rvalue);\n+                    break;\n+                  case Token.ASSIGN:\n+                    if (parent.getFirstChild() == n) {\n+                      isSet = true;\n+                      type = getValueType(n.getNext());\n+                    }\n+                    break;\n+                  case Token.FUNCTION:\n+                    Node gramps = parent.getParent();\n+                    if (gramps == null || NodeUtil.isFunctionExpression(parent)) {\n+                      return;\n+                    }\n+                    isSet = true;\n+                    type = Name.Type.FUNCTION;\n+                    break;\n+                  case Token.INC:\n+                  case Token.DEC:\n+                    isSet = true;\n+                    type = Name.Type.OTHER;\n+                    break;\n+                  default:\n+                    if (NodeUtil.isAssignmentOp(parent) &&\n+                        parent.getFirstChild() == n) {\n+                      isSet = true;\n+                      type = Name.Type.OTHER;\n+                    }\n+                    break;\n+                }\n+              }\n+              name = n.getString();\n+              break;\n+            case Token.GETPROP:\n+              if (NodeUtil.isLValue(n)) {\n+                isSet = true;\n+                type = Name.Type.OTHER;\n+\n+                Node last = n;\n+                while (last.getLastChild() != null) {\n+                  last = last.getLastChild();\n+                }\n+\n+                if (last.getType() == Token.FUNCTION) {\n+                  type = Name.Type.FUNCTION;\n+                  isSet = false;\n+                }\n+              } else {\n+                name = n.getQualifiedName();\n+                if (name == null) {\n+                  return;\n+                }\n+              }\n+              if (isSet) {\n+                handleSet(module, scope, n, name);\n+              } else {\n+                handleGet(module, scope, n, parent, name, type);\n+              }\n+              break;\n+            default:\n+              return;\n+          }\n+\n+          // We are only interested in global names.\n+          if (!isGlobalNameReference(name, scope)) {\n+            return;\n+          }\n+\n+          if (isSet) {\n+            if (isGlobalScope(scope)) {\n+              handleSetFromGlobal(module, scope, n, parent, name, isPropAssign, type);\n+            } else {\n+              handleSetFromLocal(module, scope, n, parent, name);\n+            }\n+          } else {\n+            handleGet(module, scope, n, parent, name);\n+          }\n+        }\n               case Token.INC:\n               case Token.DEC:\n                 isSet = true;",
    "result_reason": "error: orphaned case",
    "test_result": "ERROR"
}