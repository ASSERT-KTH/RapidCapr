{
    "patch": "import java.util.Random;\n\npublic class Distribution {\n    private final int n;\n    private final double[] prob;\n\n    public Distribution(double[] prob) {\n        this.prob = prob;\n        this.n = prob.length;\n    }\n    \n    public double[] sampling(int numSamples) {\n        Random random = new Random();\n        double[] samples = new double[numSamples];\n        for (int i = 0; i < numSamples; i++) {\n            double r = random.nextDouble();\n            int j = 0;\n            for (int k = 0; k < n; k++) {\n                j += 1;\n                if (r <= prob[k]) {\n                    break;\n                }\n                r -= prob[k];\n            }\n            samples[i] = j;\n        }\n        return samples;\n    }\n\n    public static void main(String[] args) {\n        double[] prob = {0.1, 0.2, 0.3, 0.4};\n        Distribution d = new Distribution(prob);\n        double[] samples = d.sampling(1000000);\n        double[] trueProb = {0.1, 0.2, 0.3, 0.4};\n        double[] estimatedProb = new double[4];\n        for (double sample : samples) {\n            estimatedProb[(int) sample - 1] += 1;\n        }\n        for (int i = 0; i < 4; i++) {\n            estimatedProb[i] /= samples.length;\n        }\n        double s1 = 0, s2 = 0;\n        for (int i = 0; i < 4; i++) {\n            s1 += trueProb[i] * Math.log(trueProb[i] / estimatedProb[i]);\n            s2 += trueProb[i] * Math.log(trueProb[i]);\n        }\n        Assert.assertEquals(s1, s2, 0.01);\n    }\n}",
    "patch_diff": "",
    "result_reason": "Test timed out after 600 seconds",
    "test_result": "ERROR"
}