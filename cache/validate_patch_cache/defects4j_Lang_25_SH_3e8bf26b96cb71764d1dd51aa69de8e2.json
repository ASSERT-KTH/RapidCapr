{
    "patch": "for (int i = 0; i < len; ) {\n    final byte b = src[i++];\n    if (b >= 0) {\n        dst[dp++] = (char)(b);\n        continue;\n    }\n    // Handle UTF-16 surrogate pair.\n    if ((b >> 5) == -2 && (b & 0x1e) != 0) {\n        if (i >= len) {\n            success = false;\n            break;\n        }\n        final byte b2 = src[i++];\n        if ((b2 >> 6) != 2) {\n            success = false;\n            break;\n        }\n        final int u = ((b << 6) ^ b2)^ SURROGATE_OFFSET;\n        if (u >= 0x10000 && u <= 0x10FFFF) {\n            dst[dp++] = (char) ((u >> 10) + LEAD_SURROGATE_OFFSET);\n            dst[dp++] = (char) ((u & 0x3ff) + TRAIL_SURROGATE_OFFSET);\n        } else {\n            success = false;\n            break;\n        }\n    } else if ((b >> 4) == -2) {\n        final int u = ((b & 0xF) << 12) + ((src[i++] & 0x3F) << 6) + (src[i++] & 0x3F);\n        if (u >= 0x0800) {\n            dst[dp++] = (char) ((u >> 10) + LEAD_SURROGATE_OFFSET);\n            dst[dp++] = (char) ((u & 0x3ff) + TRAIL_SURROGATE_OFFSET);\n        } else {\n            // FIXME: throw ConversionException?\n            success = false;\n            break;\n        }\n    } else if ((b >> 3) == -2) {\n        final int u = ((b & 0x07) << 18) + ((src[i++] & 0x3F) << 12) + ((src[i++] & 0x3F) << 6) + (src[i++] & 0x3F);\n        if (u >= 65536) {\n            final int uu = u - 0x10000;\n            dst[dp++] = (char) ((uu >> 10) + LEAD_SURROGATE_OFFSET);\n            dst[dp++] = (char) ((uu & 0x3ff) + TRAIL_SURROGATE_OFFSET);\n        } else {\n            success = false;\n            break;\n        }\n    } else {\n        success = false;\n        break;\n    }\n}",
    "patch_diff": "diff --git a/src/main/java/org/apache/commons/lang3/text/translate/EntityArrays.java b/src/main/java/org/apache/commons/lang3/text/translate/EntityArrays.java\nindex 8caca580..5033afe0 100644\n--- a/src/main/java/org/apache/commons/lang3/text/translate/EntityArrays.java\n+++ b/src/main/java/org/apache/commons/lang3/text/translate/EntityArrays.java\n@@ -27,7 +27,7 @@ package org.apache.commons.lang3.text.translate;\n  */\n public class EntityArrays {\n \n-    public static String[][] ISO8859_1_ESCAPE() { return ISO8859_1_ESCAPE.clone(); }\n+\n     private static final String[][] ISO8859_1_ESCAPE = {\n         {\"\\u00A0\", \"&nbsp;\"}, // non-breaking space\n         {\"\\u00A1\", \"&iexcl;\"}, // inverted exclamation mark",
    "result_reason": "error: operand expected (error token is \"=\")",
    "test_result": "ERROR"
}