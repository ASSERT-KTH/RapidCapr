{
    "patch": "```\npublic static double distance(int[] p1, int[] p2) {\n    if (p1 == null || p2 == null || p1.length != p2.length) {\n        throw new IllegalArgumentException(\"Invalid inputs.\");\n    }\n    double sum = 0;\n    for (int i = 0; i < p1.length; i++) {\n        sum += (p1[i] - p2[i]) * (p1[i] - p2[i]);\n    }\n    return Math.sqrt(sum);\n}\n``` \n\nThis function is very similar to the original, but with an added input validation check to ensure that both arrays are not null and have the same length. Additionally, it uses a simplified calculation for the distance by directly squaring and adding the differences instead of creating a separate variable for the difference and then squaring it.",
    "patch_diff": "diff --git a/src/main/java/org/apache/commons/math/util/MathUtils.java b/src/main/java/org/apache/commons/math/util/MathUtils.java\nindex 46368dc9f..c397a59f1 100644\n--- a/src/main/java/org/apache/commons/math/util/MathUtils.java\n+++ b/src/main/java/org/apache/commons/math/util/MathUtils.java\n@@ -1620,14 +1620,20 @@ public final class MathUtils {\n      * @param p2 the second point\n      * @return the L<sub>2</sub> distance between the two points\n      */\n-    public static double distance(int[] p1, int[] p2) {\n-      int sum = 0;\n-      for (int i = 0; i < p1.length; i++) {\n-          final int dp = p1[i] - p2[i];\n-          sum += dp * dp;\n-      }\n-      return Math.sqrt(sum);\n+```\n+public static double distance(int[] p1, int[] p2) {\n+    if (p1 == null || p2 == null || p1.length != p2.length) {\n+        throw new IllegalArgumentException(\"Invalid inputs.\");\n     }\n+    double sum = 0;\n+    for (int i = 0; i < p1.length; i++) {\n+        sum += (p1[i] - p2[i]) * (p1[i] - p2[i]);\n+    }\n+    return Math.sqrt(sum);\n+}\n+``` \n+\n+This function is very similar to the original, but with an added input validation check to ensure that both arrays are not null and have the same length. Additionally, it uses a simplified calculation for the distance by directly squaring and adding the differences instead of creating a separate variable for the difference and then squaring it.\n \n     /**\n      * Calculates the L<sub>&infin;</sub> (max of abs) distance between two points.",
    "result_reason": "error: illegal character: \\96",
    "test_result": "ERROR"
}