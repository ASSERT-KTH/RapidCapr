{
    "patch": "public static String fixForLoop(String input) {\n  String regex = \"(for\\\\s*\\\\(.*?;\\\\s*)(\\\\s*[a-zA-Z]\\\\s*=\\\\s*[a-zA-Z0-9]\\\\s*\\\\?[a-zA-Z0-9]+\\\\s*:\\\\s*\\\\[[\\\\w\\\\s,.]*\\\\]\\\\s*)?(\\\\s*;.*?\\\\))\";\n  Pattern pattern = Pattern.compile(regex, Pattern.DOTALL);\n  Matcher matcher = pattern.matcher(input);\n  \n  StringBuilder sb = new StringBuilder();\n  \n  int lastIndex = 0;  \n  while (matcher.find()) {\n    String group2 = matcher.group(2);\n    if (group2 == null) continue;\n  \n    int operatorIndex = group2.indexOf(\"in\");\n    if (operatorIndex == -1) continue;\n  \n    String variable = group2.substring(0, operatorIndex).trim();\n    String array = group2.substring(operatorIndex + 2).trim();\n  \n    String replacement = String.format(\"%sInteger.valueOf(%s.length()>0?1:0)%s\", variable, array, matcher.group(3));\n  \n    sb.append(input, lastIndex, matcher.start(2))\n        .append(replacement);\n  \n    lastIndex = matcher.end();\n  }\n  \n  sb.append(input.substring(lastIndex));\n  return sb.toString();\n}",
    "patch_diff": "diff --git a/src/com/google/javascript/jscomp/CodeGenerator.java b/src/com/google/javascript/jscomp/CodeGenerator.java\nindex 54eb5cf8..7f316c1c 100644\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n@@ -104,7 +104,35 @@ class CodeGenerator {\n     add(n, Context.OTHER);\n   }\n \n-  void add(Node n, Context context) {\n+public static String fixForLoop(String input) {\n+  String regex = \"(for\\\\s*\\\\(.*?;\\\\s*)(\\\\s*[a-zA-Z]\\\\s*=\\\\s*[a-zA-Z0-9]\\\\s*\\\\?[a-zA-Z0-9]+\\\\s*:\\\\s*\\\\[[\\\\w\\\\s,.]*\\\\]\\\\s*)?(\\\\s*;.*?\\\\))\";\n+  Pattern pattern = Pattern.compile(regex, Pattern.DOTALL);\n+  Matcher matcher = pattern.matcher(input);\n+  \n+  StringBuilder sb = new StringBuilder();\n+  \n+  int lastIndex = 0;  \n+  while (matcher.find()) {\n+    String group2 = matcher.group(2);\n+    if (group2 == null) continue;\n+  \n+    int operatorIndex = group2.indexOf(\"in\");\n+    if (operatorIndex == -1) continue;\n+  \n+    String variable = group2.substring(0, operatorIndex).trim();\n+    String array = group2.substring(operatorIndex + 2).trim();\n+  \n+    String replacement = String.format(\"%sInteger.valueOf(%s.length()>0?1:0)%s\", variable, array, matcher.group(3));\n+  \n+    sb.append(input, lastIndex, matcher.start(2))\n+        .append(replacement);\n+  \n+    lastIndex = matcher.end();\n+  }\n+  \n+  sb.append(input.substring(lastIndex));\n+  return sb.toString();\n+}\n     if (!cc.continueProcessing()) {\n       return;\n     }",
    "result_reason": "error: illegal start of type",
    "test_result": "ERROR"
}