{
    "patch": "// Choose one center uniformly at random from among the data points.\nfinal T firstPoint = pointSet.remove(random.nextInt(pointSet.size()));\nresultSet.add(new Cluster<T>(firstPoint));\n\nwhile (resultSet.size() < k) {\n    // For each data point x, compute D(x), the distance between x and\n    // the nearest center that has already been chosen.\n    double sum = 0.0;\n    for (int i = 0; i < pointSet.size(); i++) {\n        final T p = pointSet.get(i);\n        final Cluster<T> nearest = getNearestCluster(resultSet, p);\n        final double d = p.distanceFrom(nearest.getCenter());\n        sum += d * d;\n    }\n\n    // Add one new data point as a center. Each point x is chosen with\n    // probability proportional to D(x)2\n    final double r = random.nextDouble() * sum;\n    double cumulative = 0.0;\n    for (T p : pointSet) {\n        final Cluster<T> nearest = getNearestCluster(resultSet, p);\n        final double d = p.distanceFrom(nearest.getCenter());\n        cumulative += d * d;\n        if (cumulative >= r) {\n            pointSet.remove(p);\n            resultSet.add(new Cluster<T>(p));\n            break;\n        }\n    }\n}",
    "patch_diff": "diff --git a/src/main/java/org/apache/commons/math/stat/clustering/KMeansPlusPlusClusterer.java b/src/main/java/org/apache/commons/math/stat/clustering/KMeansPlusPlusClusterer.java\nindex b73ac9d3e..651ec6da3 100644\n--- a/src/main/java/org/apache/commons/math/stat/clustering/KMeansPlusPlusClusterer.java\n+++ b/src/main/java/org/apache/commons/math/stat/clustering/KMeansPlusPlusClusterer.java\n@@ -172,7 +172,36 @@ public class KMeansPlusPlusClusterer<T extends Clusterable<T>> {\n         while (resultSet.size() < k) {\n             // For each data point x, compute D(x), the distance between x and\n             // the nearest center that has already been chosen.\n-            int sum = 0;\n+// Choose one center uniformly at random from among the data points.\n+final T firstPoint = pointSet.remove(random.nextInt(pointSet.size()));\n+resultSet.add(new Cluster<T>(firstPoint));\n+\n+while (resultSet.size() < k) {\n+    // For each data point x, compute D(x), the distance between x and\n+    // the nearest center that has already been chosen.\n+    double sum = 0.0;\n+    for (int i = 0; i < pointSet.size(); i++) {\n+        final T p = pointSet.get(i);\n+        final Cluster<T> nearest = getNearestCluster(resultSet, p);\n+        final double d = p.distanceFrom(nearest.getCenter());\n+        sum += d * d;\n+    }\n+\n+    // Add one new data point as a center. Each point x is chosen with\n+    // probability proportional to D(x)2\n+    final double r = random.nextDouble() * sum;\n+    double cumulative = 0.0;\n+    for (T p : pointSet) {\n+        final Cluster<T> nearest = getNearestCluster(resultSet, p);\n+        final double d = p.distanceFrom(nearest.getCenter());\n+        cumulative += d * d;\n+        if (cumulative >= r) {\n+            pointSet.remove(p);\n+            resultSet.add(new Cluster<T>(p));\n+            break;\n+        }\n+    }\n+}\n             for (int i = 0; i < pointSet.size(); i++) {\n                 final T p = pointSet.get(i);\n                 final Cluster<T> nearest = getNearestCluster(resultSet, p);",
    "result_reason": "error: variable firstPoint is already defined in method <T>chooseInitialCenters(Collection<T>,int,Random)",
    "test_result": "ERROR"
}