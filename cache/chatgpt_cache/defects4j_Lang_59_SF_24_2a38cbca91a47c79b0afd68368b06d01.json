{
    "call": {
        "messages": [
            {
                "content": "You are an automated program repair tool.",
                "role": "system"
            },
            {
                "content": "The following code contains a bug\n```java\n    public StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n        if (width > 0) {\n            ensureCapacity(size + width);\n            String str = (obj == null ? getNullText() : obj.toString());\n            int strLen = str.length();\n            if (strLen >= width) {\n                str.getChars(0, strLen, buffer, size);\n            } else {\n                int padLen = width - strLen;\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n            size += width;\n        }\n        return this;\n    }\n```\nThe code fails on this test:\n```\ntestLang299\n```\non this test line:\n```java\n        sb.appendFixedWidthPadRight(\"foo\", 1, '-');\n```\nwith the following test error:\n```\njava.lang.ArrayIndexOutOfBoundsException\n```\nPlease provide the correct function.\nIt can be fixed by the following functions:\n1. ```java\n    public StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n        if (width > 0) {\n            ensureCapacity(size + width);\n            String str = (obj == null ? getNullText() : obj.toString());\n            int strLen = str.length();\n            if (strLen >= width) {\n                str.getChars(0, width, buffer, size);\n            } else {\n                int padLen = width - strLen;\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n            size += width;\n        }\n        return this;\n    }\n```\n2. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            int padLen = width - strLen;\n            if (padChar == 0) {\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = ' ';\n                }\n            } else {\n                str.getChars(0, strLen, buffer, size);\n                for (int i = 0; i < padLen; i++) {\n                    buffer[size + strLen + i] = padChar;\n                }\n            }\n        }\n        size += width;\n    }\n    return this;\n}\n```\n3. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            int padLen = width - strLen;\n            str.getChars(0, strLen, buffer, size);\n            for (int i = 0; i < padLen; i++) {\n                buffer[size + strLen + i] = padChar;\n            }\n        }\n        size += width;\n    }\n    return this;\n}\n```\n4. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        int padLen = width - strLen;\n        if (padLen > 0) {\n            for (int i = 0; i < padLen; i++) {\n                buffer[size + strLen + i] = padChar;\n            }\n        }\n        str.getChars(0, Math.min(strLen, width), buffer, size);\n        size += width;\n    }\n    return this;\n}\n```\n5. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        int padLen = width - strLen;\n        if (padLen > 0) {\n            for (int i = size + strLen; i < size + width; i++) {\n                buffer[i] = padChar;\n            }\n        }\n        str.getChars(0, Math.min(strLen, width), buffer, size);\n        size += width;\n    }\n    return this;\n}\n```\n6. ```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width > 0) {\n        ensureCapacity(size + width);\n        String str = (obj == null ? getNullText() : obj.toString());\n        int strLen = str.length();\n        if (strLen >= width) {\n            str.getChars(0, width, buffer, size);\n        } else {\n            int padLen = width - strLen;\n            for (int i = size, j = 0; i < size + width; i++, j++) {\n                if (j < strLen) {\n                    buffer[i] = str.charAt(j);\n                } else {\n                    buffer[i] = padChar;\n                }\n            }\n        }\n        size += width;\n    }\n    return this;\n}\n```\nPlease generate an alternative fix function.",
                "role": "user"
            }
        ],
        "model": "gpt-3.5-turbo-0301",
        "n": 1,
        "temperature": 1,
        "top_p": 1
    },
    "response": {
        "choices": [
            {
                "finish_reason": "stop",
                "index": 0,
                "message": {
                    "content": "Here is an alternative function that fixes the bug:\n\n```java\npublic StrBuilder appendFixedWidthPadRight(Object obj, int width, char padChar) {\n    if (width <= 0) {\n        return this;\n    }\n    \n    ensureCapacity(size + width);\n\n    String str = obj == null ? getNullText() : obj.toString();\n    int strLen = str.length();\n    int padLen = width - strLen;\n\n    if (strLen >= width) {\n        str.getChars(0, width, buffer, size);\n    } else {\n        str.getChars(0, strLen, buffer, size);\n        for (int i = 0; i < padLen; i++) {\n            buffer[size + strLen + i] = padChar;\n        }\n    }\n\n    size += width;\n    return this;\n}\n```\n\nThis function first checks if the `width` parameter is less than or equal to zero. If it is, it immediately returns `this` and does nothing else.\n\nOtherwise, it proceeds to ensure that the buffer has enough capacity to fit the new characters. Then, it gets the string representation of the input object, computes the lengths of the string and the necessary padding, and checks if the string length is greater or equal to the desired width.\n\nIf the string is already long enough, the function simply gets a substring of the desired width and copies it into the buffer. Otherwise, it first copies the entire string into the buffer, and then fills the remaining space with the given padding character.\n\nFinally, the function updates the size of the buffer and returns `this`.",
                    "role": "assistant"
                }
            }
        ],
        "created": 1686746801,
        "id": "chatcmpl-7RKBVsyAwMfF1pHWlTUa3w55OvD4P",
        "model": "gpt-3.5-turbo-0301",
        "object": "chat.completion",
        "usage": {
            "completion_tokens": 328,
            "prompt_tokens": 1283,
            "total_tokens": 1611
        }
    }
}